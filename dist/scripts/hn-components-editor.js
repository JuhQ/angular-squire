(function(){var e;e=function(){function e(){return["mgcrea.ngStrap","mgcrea.ngStrap.helpers.parseOptions"]}return e}(),angular.module("hn.components.editor",new e)}).call(this),function(){var e,n,t;e=function(){function e(e,n,t){return{restrict:"E",require:"ngModel",scope:{height:"@height",width:"@width",body:"=body",placeholder:"@placeholder",editorClass:"@editorClass"},replace:!0,transclude:!0,template:'<div class=\'hn-editor\'>\n    <div ng-class="{\'editor-hide\': !isEditorVisible()}" class=\'editor-container\'>\n        <div class="menu">\n            <div class="group">\n                <div title=\'Bold\' ng-click="action(\'bold\')" class="item bold">\n                    <i class="fa fa-bold"></i>\n                </div>\n                <div title=\'Italic\' ng-click="action(\'italic\')" class="item italic">\n                    <i class="fa fa-italic"></i>\n                </div>\n                <div title=\'Underline\' ng-click="action(\'underline\')"\n                    class="item underline">\n                    <i class="fa fa-underline"></i>\n                </div>\n            </div>\n            <div class="group">\n                <div title=\'Insert Link\' class="item add-link">\n                    <i class="fa fa-link"></i>\n                </div>\n                <div title=\'Insert Numbered List\'\n                    ng-click="action(\'makeOrderedList\')" class="item olist">\n                    <i class="fa fa-list-ol"></i>\n                </div>\n                <div title=\'Insert List\'\n                    ng-click="action(\'makeUnorderedList\')" class="item ulist">\n                    <i class="fa fa-list-ul"></i>\n                </div>\n                <div title=\'Quote\'\n                    ng-click="action(\'increaseQuoteLevel\')" class="item quote">\n                    <i class="fa fa-quote-right"></i>\n                </div>\n            </div>\n\n            <div class="group">\n                <div title=\'Header\' ng-click="action(\'makeHeading\')"\n                    class="item header">\n                    <i class="fa fa-header"></i>\n                </div>\n                <div title=\'Align Left\' ng-click="action(\'alignLeft\')"\n                    class="item aleft">\n                    <i class="fa fa-align-left"></i>\n                </div>\n                <div title=\'Align Center\' ng-click="action(\'alignCenter\')"\n                    class="item acenter">\n                    <i class="fa fa-align-center"></i>\n                </div>\n                <div title=\'Align Right\' ng-click="action(\'alignRight\')"\n                    class="item aright">\n                    <i class="fa fa-align-right"></i>\n                </div>\n            </div>\n\n            <div class="group">\n                <div title=\'Undo\'\n                    ng-click="action(\'undo\')"\n                    class="item">\n                    <i class="fa fa-undo"></i>\n                </div>\n                <div title=\'Redo\'\n                    ng-click="action(\'redo\')"\n                    class="item">\n                    <i class="fa fa-repeat"></i>\n                </div>\n            </div>\n        </div>\n        <div class=\'wrapper\' ng-style=\'{width: width, height: height}\'>\n            <div class=\'placeholder\'>\n                <div ng-show=\'showPlaceholder()\'>{{ placeholder }}</div>\n            </div>\n            <iframe frameborder=\'0\' border=\'0\' marginwidth=\'0\'\n                marginheight=\'0\' src=\'about:blank\'>\n            </iframe>\n        </div>\n    </div>\n    <ng-transclude></ng-transclude>\n</div>',controller:["$scope",function(e){var n;return n=!0,e.isEditorVisible=function(){return n},e.editorVisibility=this.editorVisibility=function(t){var i;return 1!==arguments.length?n:(n=t,t&&null!=(i=e.editor)?i.focus():void 0)}}],link:function(e,i,r,o){var a,s,l,c,d,u,v,g,f,m;return l=e.editor=null,g=[],a="http://",c=function(){return angular.element(l.getSelection().commonAncestorContainer).closest("a").attr("href")},e.canRemoveLink=function(){var e;return e=c(),e&&e!==a},e.canAddLink=function(){return e.data.link&&e.data.link!==a},e.data={link:a},n.put("hn.components.editor/hn_editor_popover.html",'<div class=\'hn-editor-popover\'>\n    <strong>Insert Link</strong>\n    <div class="form-group has-feedback">\n        <input type="text" class="form-control"\n            id=\'edit-link\' placeholder="Link URL"\n            ng-model=\'data.link\'\n            ng-keydown=\'popoverHide($event, "makeLink")\'/>\n        <label for="edit-link" title="Remove Link"\n            ng-show="canRemoveLink()"\n            ng-click="action(\'removeLink\')"\n            class="glyphicon glyphicon-remove\n                text-danger form-control-feedback close-popover">\n        </label>\n    </div>\n    <div ng-if="!canRemoveLink()" class="btn btn-success btn-block"\n        ng-class="{disabled: !canAddLink()}"\n        ng-click="action(\'makeLink\')">\n        Insert\n    </div>\n    <div ng-if="canRemoveLink()"class="btn btn-success btn-block"\n        ng-class="{disabled: !canAddLink()}"\n        ng-click="action(\'makeLink\')">\n        Update\n    </div>\n</div>'),e.$on("$destroy",function(){return null!=l?l.destroy():void 0}),e.showPlaceholder=function(){return 0===angular.element("<div>"+o.$viewValue+"</div>").text().trim().length},e.popoverHide=function(n,t){return 13===n.keyCode?(_.each(g,function(e){return e.hide()}),e.action(t)):void 0},e.$on("tooltip.show.before",function(){return l?e.data.link=/>A\b/.test(l.getPath())||l.hasFormat("A")?c():a:void 0}),e.$on("tooltip.show",function(e,n){return l?n.$element.find("input").focus():void 0}),f=function(n){return e.$evalAsync(function(){return o.$setViewValue(n)})},m=function(){var n,t;return n=l.getDocument(),t=n.head,_.each(angular.element("link"),function(e){var i;return i=n.createElement("link"),i.setAttribute("href",e.href),i.setAttribute("type","text/css"),i.setAttribute("rel","stylesheet"),t.appendChild(i)}),n.childNodes[0].className="hn-editor-iframe ",e.editorClass?n.childNodes[0].className+=e.editorClass:void 0},s=function(){return g.push(t(i.find(".add-link"),{contentTemplate:"hn.components.editor/hn_editor_popover.html",autoClose:!0,html:!0,scope:e,placement:"bottom"}))},d=i.find("iframe"),v=i.find(".menu"),u=function(){return l=e.editor=new Squire(d[0].contentWindow.document),l.defaultBlockTag="P",e.body&&l.setHTML(e.body),m(),s(),l.addEventListener("input",function(){return f(l.getHTML())}),l.addEventListener("focus",function(){return i.addClass("focus"),_.each(g,function(e){return e.hide()}),e.editorVisibility(!0)}),l.addEventListener("blur",function(){return i.removeClass("focus"),f(l.getHTML())}),l.addEventListener("pathChange",function(){var e;return e=l.getPath(),/>A\b/.test(e)||l.hasFormat("A")?i.find(".add-link").addClass("active"):i.find(".add-link").removeClass("active"),v.attr("class","menu "+e.replace(/>|\.|html|body|div/gi," ").toLowerCase())}),l.alignRight=function(){return l.setTextAlignment("right")},l.alignCenter=function(){return l.setTextAlignment("center")},l.alignLeft=function(){return l.setTextAlignment("left")},l.alignJustify=function(){return l.setTextAlignment("justify")},l.makeHeading=function(){return l.setFontSize("2em"),l.bold()}},/WebKit\//.test(navigator.userAgent)?u():d.on("load",u),Squire.prototype.testPresenceinSelection=function(e,n,t,i){var r,o;return r=this.getPath(),o=i.test(r)|this.hasFormat(t),e===n&&o},e.action=function(n){var t,i,r,o;if(l){if(o={value:n,testBold:l.testPresenceinSelection("bold",n,"B",/>B\b/),testItalic:l.testPresenceinSelection("italic",n,"I",/>I\b/),testUnderline:l.testPresenceinSelection("underline",n,"U",/>U\b/),testOrderedList:l.testPresenceinSelection("makeOrderedList",n,"OL",/>OL\b/),testUnorderedList:l.testPresenceinSelection("makeUnorderedList",n,"UL",/>UL\b/),testLink:l.testPresenceinSelection("removeLink",n,"A",/>A\b/),testQuote:l.testPresenceinSelection("increaseQuoteLevel",n,"blockquote",/>blockquote\b/),isNotValue:function(e){return e===n&&""!==this.value}},o.testBold&&l.removeBold(),o.testItalic&&l.removeItalic(),o.testUnderline&&l.removeUnderline(),o.testOrderedList&&l.removeList(),o.testUnorderedList&&l.removeList(),o.testQuote&&l.decreaseQuoteLevel(),o.testLink)return l.removeLink(),l.focus();if(!o.isNotValue("removeLink")){if("makeLink"===n){if(!e.canAddLink())return;return t=angular.element(l.getSelection().commonAncestorContainer).closest("a")[0],t&&(i=d[0].contentWindow.document.createRange(),i.selectNodeContents(t),r=d[0].contentWindow.getSelection(),r.removeAllRanges(),r.addRange(i)),l.makeLink(e.data.link,{target:"_blank",title:e.data.link,rel:"nofollow"}),e.data.link=a,l.focus()}return l[n](),l.focus()}}}}}}return e}(),t=function(){function e(){return{restrict:"E",replace:!0,transclude:!0,require:"^hn-editor",template:'<ng-transclude ng-show="isCoverVisible()"\n    ng-click=\'hideCover()\'\n    class="hn-editor-cover">\n</ng-transclude>',link:function(e,n,t,i){var r;return r=!0,e.isCoverVisible=function(){return r},e.hideCover=function(){return r=!1,i.editorVisibility(!0)},i.editorVisibility(!r),e.$watch(function(){return i.editorVisibility()},function(e){return r=!e})}}}return e}(),n=function(){function e(){return{restrict:"E",scope:!1,replace:!0,transclude:!0,require:"^hn-editor",template:'<ng-transclude ng-show="isControlsVisible()"\n    class="hn-editor-controls">\n</ng-transclude>',link:function(e,n,t,i){return e.isControlsVisible=function(){return i.editorVisibility()}}}}return e}(),angular.module("hn.components.editor").directive("hnEditor",["$timeout","$templateCache","$popover",e]).directive("hnEditorCover",[t]).directive("hnEditorControls",[n])}.call(this),angular.module("appConfig",[]).constant("APP_CONFIG",{app_name:"hn.components.editor",dev_server:{host:"0.0.0.0",port:8001,backend:"https://lb.hn"},bower_exclude:["/chai/","/angular-mocks/"],main_module_name:"editor",api_version:"1.0",web_root:"/",bower_versions:{"angular-animate":"1.3.12","angular-loading-bar":"0.6.0","angular-messages":"1.3.12","angular-mocks":"1.3.12","angular-motion":"0.3.2","angular-sanitize":"1.3.12","angular-strap":"2.1.6","angular-touch":"1.3.12",angular:"1.3.12","bootstrap-sass":"3.3.3",bootstrap:"3.3.2",chai:"1.7.1","font-awesome":"4.3.0",jquery:"2.1.3",Squire:"1.0.0","angular-ui-router":"0.2.13","underscore.string":"3.0.2",underscore:"1.7.0"},build_date:"2015-02-04T21:19:59.501Z"});